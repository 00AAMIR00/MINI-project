<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Login / Register Form (React)</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }

    body {
      margin: 0;
      padding: 0;
      background: #1dbf73;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .container {
      background: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 400px;
    }

    h2 {
      text-align: center;
      margin-bottom: 1.5rem;
    }

    input {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    button {
      width: 100%;
      padding: 10px;
      background-color: #1dbf73;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 1rem;
      cursor: pointer;
      margin-top: 10px;
    }

    button:hover {
      background-color: #0056b3;
    }

    .toggle {
      margin-top: 1rem;
      text-align: center;
      cursor: pointer;
      color: #007bff;
      font-size: 0.9rem;
    }

    .message {
      text-align: center;
      margin-top: 1rem;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <!-- React + Babel CDN -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

  <script type="text/babel">
    const { useState } = React;

    function AuthForm() {
      const [isLogin, setIsLogin] = useState(true);
      const [formData, setFormData] = useState({
        username: "",
        email: "",
        password: "",
        confirmPassword: "",
      });
      const [message, setMessage] = useState("");

      const toggleForm = () => {
        setIsLogin(!isLogin);
        setFormData({ username: "", email: "", password: "", confirmPassword: "" });
        setMessage("");
      };

      const handleChange = (e) => {
        setFormData({ ...formData, [e.target.name]: e.target.value });
      };

      const handleSubmit = (e) => {
        e.preventDefault();
        const { username, email, password, confirmPassword } = formData;

        if (isLogin) {
          if (!username || !password) {
            setMessage("❌ Please fill in all fields.");
            return;
          }
          setMessage("✅ Login successful! (demo only)");
        } else {
          if (!username || !email || !password || !confirmPassword) {
            setMessage("❌ Please fill in all fields.");
            return;
          }
          if (password !== confirmPassword) {
            setMessage("❌ Passwords do not match.");
            return;
          }
          localStorage.setItem("user", JSON.stringify({ username, email, password }));
          setMessage("✅ Registration successful! Please login.");
          setIsLogin(true);
        }
      };

      return (
        <div className="container">
          <h2>{isLogin ? "Login" : "Register"}</h2>

          <form onSubmit={handleSubmit}>
            <input
              type="text"
              name="username"
              placeholder="Enter Username"
              value={formData.username}
              onChange={handleChange}
              required
            />
            {!isLogin && (
              <input
                type="email"
                name="email"
                placeholder="Enter Email"
                value={formData.email}
                onChange={handleChange}
                required
              />
            )}
            <input
              type="password"
              name="password"
              placeholder="Enter Password"
              value={formData.password}
              onChange={handleChange}
              required
            />
            {!isLogin && (
              <input
                type="password"
                name="confirmPassword"
                placeholder="Confirm Password"
                value={formData.confirmPassword}
                onChange={handleChange}
                required
              />
            )}
            <button type="submit">{isLogin ? "Login" : "Register"}</button>
          </form>

          <div className="toggle" onClick={toggleForm}>
            {isLogin
              ? "Don't have an account? Register"
              : "Already have an account? Login"}
          </div>

          {message && <div className="message">{message}</div>}
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<AuthForm />);
  </script>
</body>
</html>
